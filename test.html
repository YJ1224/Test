<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>1000ë§Œì› vs ì§‘ vs ì•ˆ ì‚¬ì¤Œ</title>
  <style>
    :root{
      --bg1:#fff7f8;
      --bg2:#f6efff;
      --text:#2b2b2b;
      --sub:#6b6b6b;
      --card:#ffffffcc;
      --shadow: 0 12px 30px rgba(0,0,0,.08);
      --shadow2: 0 18px 40px rgba(0,0,0,.12);
      --radius: 28px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo","Noto Sans KR", Arial, sans-serif;
      color:var(--text);
      min-height:100vh;
      overflow:hidden;
      background: radial-gradient(1200px 800px at 50% 30%, var(--bg1) 0%, #ffffff 40%, var(--bg2) 120%);
    }

    /* floating emojis */
    .float-layer{ position:fixed; inset:0; pointer-events:none; opacity:.55; }
    .float{
      position:absolute;
      transform: translateY(120vh);
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.06));
      animation: drift var(--dur) linear infinite;
      font-size: var(--fs);
      opacity: var(--op);
      user-select:none;
    }
    @keyframes drift{
      0%{ transform: translateY(110vh) translateX(0) rotate(0deg); opacity:0; }
      10%{opacity:1}
      90%{opacity:1}
      100%{ transform: translateY(-20vh) translateX(var(--dx)) rotate(var(--rot)); opacity:0; }
    }

    .wrap{
      position:relative;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px 18px;
    }
    .panel{ width:min(980px, 100%); text-align:center; position:relative; }

    .badge-row{
      display:flex;
      gap:14px;
      justify-content:center;
      font-size:34px;
      margin-bottom:12px;
      user-select:none;
    }

    h1{
      margin:0 0 10px;
      font-size: clamp(34px, 5.2vw, 56px);
      letter-spacing:-.02em;
      font-weight: 900;
      background: linear-gradient(90deg, #ff4b6e 0%, #ff7a59 40%, #8a6bff 100%);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .sub{
      margin:0 auto 22px;
      max-width:560px;
      color:var(--sub);
      font-size:15px;
      line-height:1.6;
      user-select:none;
    }

    .cta{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      border:0;
      background:#fff;
      padding: 14px 26px;
      border-radius: 999px;
      box-shadow: var(--shadow);
      cursor:pointer;
      font-weight:900;
      font-size:16px;
      transition: transform .18s ease, box-shadow .18s ease;
      touch-action: manipulation;
    }
    .cta:hover{ transform: translateY(-2px); box-shadow: var(--shadow2); }
    .cta:active{ transform: translateY(0) scale(.98); }

    .screen{ display:none; }
    .screen.active{ display:block; }

    /* center message card */
    .msg-card{
      width:min(760px, 100%);
      margin: 0 auto 16px;
      padding: 18px 18px 16px;
      border-radius: 18px;
      background: rgba(255,255,255,.70);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.75);
      box-shadow: var(--shadow);
      user-select:none;
    }
    .msg-top{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      font-weight:900;
      letter-spacing:-.01em;
    }
    .msg-top .emo{ font-size:28px; }
    .msg-sub{
      margin-top:6px;
      color: var(--sub);
      font-size: 13px;
    }
    .msg-live{
      margin-top: 10px;
      font-weight: 900;
      letter-spacing:-.01em;
      font-size: 16px;
      color: #2a2a2a;
    }
    .msg-live b{
      color:#ff4b6e;
    }

    /* center options */
    .options{
      width:min(760px, 100%);
      margin: 0 auto;
      display:flex;
      align-items:stretch;
      justify-content:center;
      gap: 14px;
      transition: gap .18s ease;
      user-select:none;
    }
    .opt{
      flex: 1;
      min-width: 180px;
      border: 0;
      border-radius: 999px;
      padding: 16px 16px;
      font-weight: 900;
      font-size: 16px;
      cursor:pointer;
      box-shadow: var(--shadow);
      background: rgba(255,255,255,.86);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.70);
      transition:
        transform .18s ease,
        opacity .18s ease,
        width .18s ease,
        flex .18s ease,
        padding .18s ease,
        filter .18s ease,
        box-shadow .18s ease,
        max-height .18s ease;
      touch-action: manipulation;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      white-space:nowrap;
    }
    .opt:active{ transform: scale(.985); }
    .opt .icon{ font-size:18px; }

    .opt.cash{ background: linear-gradient(180deg, rgba(255,90,120,.16), rgba(255,255,255,.86)); }
    .opt.house{ background: linear-gradient(180deg, rgba(120,120,255,.20), rgba(255,255,255,.86)); }
    .opt.none{ background: linear-gradient(180deg, rgba(60,60,60,.10), rgba(255,255,255,.86)); }

    .opt.hovered{
      transform: translateY(-2px);
      box-shadow: var(--shadow2);
    }

    /* âœ… houseOnly mode: center buttons morph to ONE big house button */
    .options.houseOnly{ gap: 0; }
    .options.houseOnly .opt:not(.house){
      opacity:0;
      width:0;
      flex: 0;
      padding:0;
      border-width:0;
      max-width:0;
      max-height:0;
      height:0;
      overflow:hidden;
      pointer-events:none;
      filter: blur(1px);
    }
    .options.houseOnly .opt.house{
      flex: 1;
      width: 100%;
      max-width: 760px;
      transform: translateY(-2px) scale(1.03);
      box-shadow: 0 18px 42px rgba(138,107,255,.22);
      filter: saturate(1.08);
    }

    .hint{
      margin-top: 12px;
      color: var(--sub);
      font-size: 13px;
      user-select:none;
    }

    /* tooltip follows pointer/finger */
    .tip{
      position: fixed;
      top: 0; left: 0;
      transform: translate(-9999px,-9999px);
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.82);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.78);
      box-shadow: 0 12px 24px rgba(0,0,0,.10);
      font-weight: 900;
      font-size: 13px;
      color: #2a2a2a;
      pointer-events:none;
      opacity:0;
      transition: opacity .12s ease;
      user-select:none;
      white-space:nowrap;
      z-index: 50;
    }
    .tip.show{ opacity:1; }

    @media (max-width: 860px){
      .options{ flex-direction: column; gap: 12px; }
      .opt{ min-width: 0; width: 100%; }
      .options.houseOnly .opt.house{ max-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="float-layer" id="floatLayer" aria-hidden="true"></div>

  <div class="wrap">
    <div class="panel">

      <!-- Landing -->
      <section class="screen active" id="screenLanding">
        <div class="badge-row">ğŸ’¸ <span style="opacity:.55">ğŸ </span> ğŸ™…</div>
        <h1>1000ë§Œì› vs ì§‘ vs ì•„ë¬´ê²ƒë„ ì•ˆí•˜ê¸°</h1>
        <button class="cta" id="btnStart">ì‹œì‘í•˜ê¸°</button>
      </section>

      <!-- Choice -->
      <section class="screen" id="screenChoice">
        <div class="msg-card">
          <div class="msg-top">
            <span class="emo">ğŸ’¸</span><span class="emo">ğŸ </span><span class="emo">ğŸ™…</span>
          </div>
          <div class="msg-sub">ë”± í•˜ë‚˜ë§Œ ì„ íƒ ê°€ëŠ¥</div>
          <div class="msg-live" id="liveLine">ì˜¬ë ¤ë´ ğŸ™‚</div>
        </div>

        <div class="options" id="options">
          <button class="opt cash" id="optCash" type="button" aria-label="1,000ë§Œì› ì£¼ê¸°">
            <span class="icon">ğŸ’¸</span><span>1,000ë§Œì› ì£¼ê¸°</span>
          </button>
          <button class="opt house" id="optHouse" type="button" aria-label="ì§‘ ì‚¬ì£¼ê¸°">
            <span class="icon">ğŸ </span><span>ì§‘ ì‚¬ì£¼ê¸°</span>
          </button>
          <button class="opt none" id="optNone" type="button" aria-label="ì•„ë¬´ê²ƒë„ ì•ˆí•˜ê¸°">
            <span class="icon">ğŸ™…</span><span>ì•„ë¬´ê²ƒë„ ì•ˆí•˜ê¸°</span>
          </button>
        </div>

        <div class="hint">....ì§‘</div>
      </section>

      <!-- Result -->
      <section class="screen" id="screenResult">
        <div class="badge-row">ğŸ </div>
        <h1>ì„ íƒ ì™„ë£Œ</h1>
        <p class="sub" id="resultText">ë‹¹ì‹ ì˜ ì„ íƒ: ğŸ  ì§‘ ì‚¬ì£¼ê¸°</p>
        <button class="cta" id="btnRestart">ë‹¤ì‹œ í•˜ê¸°</button>
      </section>

    </div>
  </div>

  <div class="tip" id="tip"></div>

  <script>
    const $ = (s) => document.querySelector(s);
    const isTouchDevice =
      ("ontouchstart" in window) || (navigator.maxTouchPoints && navigator.maxTouchPoints > 0);

    // floating emojis
    (function makeFloaters(){
      const layer = $("#floatLayer");
      const emojis = ["ğŸ’¸","ğŸ ","ğŸ’—","âœ¨","ğŸ’³","ğŸ§¾","ğŸª™","ğŸ’"];
      for(let i=0;i<16;i++){
        const el = document.createElement("div");
        el.className = "float";
        el.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        el.style.left = (Math.random()*100).toFixed(2) + "vw";
        el.style.setProperty("--dur", (10 + Math.random()*14).toFixed(2) + "s");
        el.style.setProperty("--dx", (Math.random()*140 - 70).toFixed(0) + "px");
        el.style.setProperty("--rot", (Math.random()*80 - 40).toFixed(0) + "deg");
        el.style.animationDelay = (-Math.random()*20).toFixed(2) + "s";
        el.style.setProperty("--op", (0.35 + Math.random()*0.45).toFixed(2));
        el.style.setProperty("--fs", (14 + Math.random()*16).toFixed(0) + "px");
        layer.appendChild(el);
      }
    })();

    // screens
    const screenLanding = $("#screenLanding");
    const screenChoice  = $("#screenChoice");
    const screenResult  = $("#screenResult");
    const btnStart = $("#btnStart");
    const btnRestart = $("#btnRestart");
    const resultText = $("#resultText");

    // center options
    const options = $("#options");
    const optCash = $("#optCash");
    const optHouse = $("#optHouse");
    const optNone = $("#optNone");

    // live line + tooltip
    const liveLine = $("#liveLine");
    const tip = $("#tip");

    // tooltip follow
    let px=-9999, py=-9999, tx=-9999, ty=-9999;
    let tipVisible=false;

    // ====== FUN COPY POOL (ê°œê·¸ ë©˜íŠ¸ ëŒ€ëŸ‰ + ì—ìŠ¤ì»¬ë ˆì´ì…˜) ======
    const COPY = {
      invite: [
        "ì˜¬ë ¤ë´ ğŸ™‚",
        "ì˜¬ë ¤ë´. ì„ íƒê¶Œ ìˆëŠ” ì²™ í•´ì¤„ê²Œ",
        "ì¼ë‹¨ ì˜¬ë ¤ë´â€¦(ê²°ê³¼ëŠ” ì •í•´ì ¸ìˆìŒ)",
        "ì˜¬ë ¤ë´â€¦ ì†ì´ ì–´ë””ë¡œ ê°€ë‚˜ ë³´ì",
        "ì˜¬ë ¤ë´. ë‚´ê°€ ë³´ê³  ìˆë‹¤ ğŸ‘€",
        "ì˜¬ë ¤ë´. ì²œë§Œì› ëˆ„ë¥´ë©´ ë§ˆìŒì´ ê°€ë²¼ì›Œì§(ì§‘ì´ ì‚¬ë¼ì§)",
        "ì˜¬ë ¤ë´. ì•ˆ ì‚¬ì¤Œì€ ì¥ì‹ì¼ ìˆ˜ë„?",
        "ì˜¬ë ¤ë´. ì—¬ê¸°ì„  â€˜ê³ ë¥¼ ìˆ˜ ìˆëŠ” ì²™â€™ì´ í•µì‹¬ì´ì•¼",
        "ì˜¬ë ¤ë´. ë„¤ ì†ì˜ ë³¸ì‹¬ì„ í™•ì¸í•˜ì",
        "ì˜¬ë ¤ë´. ì§‘ ë²„íŠ¼ì´ ì˜¤ëŠ˜ ì£¼ì¸ê³µì„",
        "ì˜¬ë ¤ë´. ì„ íƒí•´ë„â€¦ ì„ íƒí•œ ê²Œ ì•„ë‹ ìˆ˜ë„",
        "ì˜¬ë ¤ë´. ì˜¤ëŠ˜ì˜ ë¯¸ì…˜: ì§‘",
        "ì˜¬ë ¤ë´. ì† ë–¨ë¦¬ë©´ ì •ìƒ",
        "ì˜¬ë ¤ë´. ë‹¤ë¥¸ ì„ íƒì§€? ìˆë‹¤ê°€ ì‚¬ë¼ì§",
        "ì˜¬ë ¤ë´. ì²œë§Œì›ì€ ê·€ì—½ê³  ì§‘ì€ ë¬´ì„­ë‹¤",
        "ì˜¬ë ¤ë´. â€˜ì•ˆ ì‚¬ì¤Œâ€™ì€ ë§ˆìŒì´ ì•½í•˜ë©´ ëª» ëˆŒëŸ¬",
        "ì˜¬ë ¤ë´. ì§„ì§œë¡œ ëˆ„ë¥¼ ê±´ ì•„ë‹ˆì§€?",
        "ì˜¬ë ¤ë´. ì§‘ ëˆ„ë¥´ë©´ ê¹”ë”í•˜ê²Œ ëë‚¨"
      ],
      house: [
        "ê·¸ë˜. <b>ì§‘</b>.",
        "ì •ë‹µ. <b>ì§‘</b>.",
        "ì§‘ ëˆ„ë¥´ë©´ í‰í™”ê°€ ì˜¨ë‹¤ ğŸ ",
        "ì´ê²Œ ì–´ë¥¸ì˜ ì„ íƒì´ì§€",
        "ì˜¤ì¼€ì´. ì €ì¥.",
        "ë“œë””ì–´ í˜„ì‹¤ì„ ë§ˆì£¼í–ˆêµ°",
        "ì¢‹ì•„. ë” ì´ìƒ ë§ ì•ˆ í•´ë„ ë¨",
        "ì§‘ì€ ë°°ì‹  ì•ˆ í•´",
        "ì§‘ ëˆ„ë¥´ë©´ ì˜¤ëŠ˜ì€ ì¹­ì°¬í•´ì¤„ê²Œ",
        "ê·¸ë ‡ì§€â€¦ ì§‘ì´ì§€â€¦"
      ],
      restore: [
        "ì–´ë””ê°€ ğŸ˜Œ",
        "ë„ë§? ë‹¤ì‹œ ì™€",
        "ì›ë³µ~ ì„ íƒê¶Œ ëŒë ¤ë“œë¦¼(ì ê¹ë§Œ)",
        "ë‹¤ì‹œ 3ê°œì¸ ì²™ í•´ì¤„ê²Œ",
        "ì, ë‹¤ì‹œ â€˜ê³ ë¥¼ ìˆ˜ ìˆëŠ” ì²™â€™",
        "ì¬ë„ì „? ì˜¤ì¼€ì´. (ì§‘)",
        "ë‹¤ì‹œ ì‹œì‘. ì´ë²ˆì—” ëœ ì•„í”„ê²Œ í•´ì¤„ê²Œ",
        "ì„ íƒê¶Œ ë³µêµ¬ ì™„ë£Œ(ìœ í†µê¸°í•œ ì§§ìŒ)",
        "ë‹¤ì‹œ ì—´ì–´ì¤Œ. ê·¼ë° ê²°ë§ì€ ë˜‘ê°™ìŒ"
      ],
      tease_common: [
        // level 0 (1~2)
        [
          "ì§‘ ì‚¬ì£¼ì§€?",
          "ì‘~ ì§‘.",
          "ê·¸ ì†â€¦ ë©ˆì¶°.",
          "ì˜¤â€¦ ê·¸ìª½ì´ë„¤?",
          "ì„ íƒì€ ììœ â€¦(ì•„ë‹˜)",
          "ëˆ„ë¥¼ ìˆ˜ëŠ” ìˆì–´â€¦(ê²°ê³¼ëŠ” ì§‘)"
        ],
        // level 1 (3~5)
        [
          "ê·¸ê±°â€¦ ì§„ì‹¬ì´ì•¼?",
          "ì§€ê¸ˆ ë¹„ì§‘ëŠ” ê±° ë‹¤ ë´„",
          "ì„ íƒì§€ 3ê°œì§€ë§Œ ê²°ë§ì€ 1ê°œì•¼",
          "ê·¸ëŸ´ìˆ˜ë¡ ì§‘ì´ ë” ì»¤ì§„ë‹¤",
          "ìš°ë¦¬ ê¸°ì‹¸ì›€ í•˜ìëŠ” ê±°ì§€?",
          "í•œ ë²ˆ ë” ê°€ë©´ ì§‘ í™•ì •ì„"
        ],
        // level 2 (6~9)
        [
          "ì´ì¯¤ì´ë©´ ê·¸ëƒ¥ ì§‘ ëˆ„ë¥´ì",
          "ì„ íƒê¶Œ íšŒìˆ˜ ì¤‘â€¦",
          "ì§‘ì´ êµ­ë£°ì´ë¼ê³  í–ˆì§€?",
          "ë„ˆì˜ ììœ : ì§‘ ì‚¬ì£¼ê¸°",
          "ì´ ì•±ì€ ì§‘ì„ ì‚¬ë‘í•©ë‹ˆë‹¤",
          "ê³„ì† ê·¸ëŸ¬ë©´ ì§‘ë§Œ ë‚¨ëŠ”ë‹¤(ì˜ˆê³ )"
        ],
        // level 3 (10+)
        [
          "ì‘â€¦ ì§‘. (ëŒ€í™” ì¢…ë£Œ)",
          "ê·œì¹™: ì§‘ ì•„ë‹ˆë©´ ì§„í–‰ ë¶ˆê°€",
          "ë¹„ì§‘ì„ìˆ˜ë¡ ì§‘ í™•ë¥  100%",
          "ë‚˜ë‘ ê¸°ì‹¸ì›€ í•´? ì§‘.",
          "ì´ì¯¤ ë˜ë©´ ê·¸ëƒ¥ ì§‘ ì‚¬ì¤˜",
          "ì„ íƒê¶Œ ë°•íƒˆ. ì§‘."
        ]
      ],
      tease_cash: [
        [
          "ì²œë§Œì›? ê·€ì—½ë„¤",
          "ê·¸ê±°ë¡œ ì§‘ ëª» ì‚¬â€¦",
          "í˜„ê¸ˆì€ ìŠ¤ì³ê°€ëŠ” ê±°ì•¼",
          "ì²œë§Œì›ì€â€¦ ì¤€ë¹„ìš´ë™",
          "ì²œë§Œì›ì€ â€˜ì§‘â€™ì˜ ã„±ë„ ì•„ë‹˜"
        ],
        [
          "ì²œë§Œì›? ê·¸ê±´ ìƒí™œë¹„ì§€ ğŸ˜Œ",
          "í˜„ê¸ˆ ê³ ì§‘í•˜ë©´ í˜ì´ì§€ê°€ ì‚ì ¸",
          "ëˆì€ ì“°ë©´ ë, ì§‘ì€ ë‚¨ìŒ",
          "ê·¸ ì†â€¦ í˜„ê¸ˆ ìª½ìœ¼ë¡œ ì™œ ê°€",
          "ì²œë§Œì›ìœ¼ë¡œëŠ” ì˜µì…˜ì´ ì•ˆ ë¼"
        ],
        [
          "ì²œë§Œì›ì€ ì§‘ ì• í™”ë¶„ ê°’(?)",
          "í˜„ê¸ˆì€ ë°˜ì§, ì§‘ì€ ì˜ì›",
          "ì²œë§Œì›â€¦ ê·¸ê±´ ì§‘ì˜ â€˜ì…êµ¬â€™ë„ ì•„ë‹˜",
          "ì²œë§Œì› ëˆ„ë¥´ë©´ ì§‘ì´ ë” ì»¤ì§",
          "í˜„ê¸ˆ ì„ íƒí•˜ë ¤ëŠ” ì†â€¦ ì˜ì‹¬ë¨"
        ],
        [
          "ì²œë§Œì› ê·¸ë§Œâ€¦ ì´ì œ ì§‘ ëˆŒëŸ¬",
          "í˜„ê¸ˆ ê³„ì† ë³´ë©´ ì§‘ì´ ì„œìš´í•´í•¨",
          "ì‘~ ì§‘. ê³„ì† ëˆŒëŸ¬ë„ ì§‘.",
          "ì²œë§Œì›ì€ ì´ì œ ê·¸ë§Œ. ì§‘.",
          "ì—¬ê¸°ì„  í˜„ê¸ˆì´ ì•½í•˜ë‹¤â€¦ ì§‘."
        ]
      ],
      tease_none: [
        [
          "ì•ˆ ì‚¬ì¤Œâ€¦? ì„¤ë§ˆ",
          "ê·¸ ì„ íƒì§€ëŠ” ì¥ì‹ì´ì•¼",
          "ì•ˆ ì‚¬ì£¼ê¸°ëŠ”â€¦ ë§ˆìŒì´ ì•„íŒŒ",
          "ê·¸ ë²„íŠ¼ ëˆ„ë¥´ë©´ ì–‘ì‹¬ì´ ìš´ë‹¤",
          "ì•ˆ ì‚¬ì¤Œì€ ë„ˆë¬´ ì†”ì§í•˜ì–ì•„"
        ],
        [
          "ì•ˆ ì‚¬ì¤Œ ëˆ„ë¥´ë©´ ì–‘ì‹¬ì´ ìš¸ë¦¼",
          "ê·¸ ë²„íŠ¼ì€ í…ŒìŠ¤íŠ¸ìš©ì´ì•¼",
          "ì•ˆ ì‚¬ì¤Œì€ í˜„ì‹¤ì—ì„œ ìœ„í—˜í•´",
          "ì§€ê¸ˆ â€˜ì•ˆ ì‚¬ì¤Œâ€™ ëˆ„ë¥´ë ¤ í•œ ê±° ë§ì§€?",
          "ì•ˆ ì‚¬ì¤Œì€â€¦ í™”ë©´ì´ ì‹«ì–´í•¨"
        ],
        [
          "ì•ˆ ì‚¬ì¤Œ? ê·¸ëŸ¼ ë” ì§‘",
          "ì•ˆ ì‚¬ì£¼ë©´â€¦ ê¸°ì–µ ë‚¨ëŠ”ë‹¤",
          "ê·¸ëŸ´ìˆ˜ë¡ ì§‘ ë²„íŠ¼ë§Œ ë‚¨ëŠ”ë‹¤",
          "ì•ˆ ì‚¬ì¤Œ ì„ íƒí•˜ë ¤ëŠ” ìˆœê°„ ì§‘ì´ ë¹›ë‚¨",
          "ì—¬ê¸°ì„œ ì•ˆ ì‚¬ì¤Œì€ ê¸ˆì§€ì–´ì•¼"
        ],
        [
          "ì•ˆ ì‚¬ì¤Œ ëˆ„ë¥´ë ¤ëŠ” ìˆœê°„, ì§‘ í™•ì •",
          "ê¸°ì‹¸ì›€? ì§‘.",
          "ì‘â€¦ ì§‘. (ì•ˆ ì‚¬ì¤Œ ê¸ˆì§€)",
          "ì•ˆ ì‚¬ì¤Œì€ ì—†ë‹¤. ì§‘.",
          "ê·¸ê±° ëˆ„ë¥´ë©´ ì§‘ì´ ë‘ ë°°ë¡œ ì»¤ì§(ì²´ê°)"
        ]
      ]
    };

    let wobbleCount = 0;     // ë¹„ì§‘ ì‹œë„ íšŸìˆ˜
    let lastTeaseAt = 0;     // ë©˜íŠ¸ ìŠ¤íŒ¸ ë°©ì§€
    let lastInviteAt = 0;

    function pick(arr){ return arr[Math.floor(Math.random() * arr.length)]; }
    function getTeaseLevel(n){
      if(n <= 2) return 0;
      if(n <= 5) return 1;
      if(n <= 9) return 2;
      return 3;
    }
    function pickLine(mode){
      if(mode === "invite")  return pick(COPY.invite);
      if(mode === "house")   return pick(COPY.house);
      if(mode === "restore") return pick(COPY.restore);

      const lvl = getTeaseLevel(wobbleCount);
      if(mode === "cash"){
        return pick([...COPY.tease_common[lvl], ...COPY.tease_cash[lvl]]);
      }
      if(mode === "none"){
        return pick([...COPY.tease_common[lvl], ...COPY.tease_none[lvl]]);
      }
      return "ì§‘ ì‚¬ì£¼ì§€?";
    }

    // liveLine + tooltip set
    function setCopy(text){
      liveLine.innerHTML = text;    // b íƒœê·¸(ê°•ì¡°) ì“°ë ¤ê³  innerHTML
      tip.textContent = text.replace(/<[^>]*>/g, ""); // tooltipì€ í…ìŠ¤íŠ¸ë§Œ
    }

    function showTip(text){
      setCopy(text);
      tip.classList.add("show");
      tipVisible = true;
    }
    function hideTip(){
      tip.classList.remove("show");
      tipVisible = false;
    }

    function animateTip(){
      tx += (px + 14 - tx) * 0.18;
      ty += (py - 18 - ty) * 0.18;
      tip.style.transform = `translate(${tx}px, ${ty}px)`;
      requestAnimationFrame(animateTip);
    }
    requestAnimationFrame(animateTip);

    function updatePointer(e){
      if(e.touches && e.touches[0]){ px=e.touches[0].clientX; py=e.touches[0].clientY; return; }
      if(e.changedTouches && e.changedTouches[0]){ px=e.changedTouches[0].clientX; py=e.changedTouches[0].clientY; return; }
      if(typeof e.clientX==="number"){ px=e.clientX; py=e.clientY; }
    }

    function setHovered(el){
      [optCash,optHouse,optNone].forEach(b=>b.classList.remove("hovered"));
      if(el) el.classList.add("hovered");
    }

    // UI state
    let locked = false; // houseOnly ìƒíƒœì¸ì§€
    let focus = null;   // "house"|"cash"|"none"|null

    function lockToHouse(reason){ // "cash" | "none"
      locked = true;
      options.classList.add("houseOnly");
      setHovered(optHouse);

      const now = performance.now();
      if(now - lastTeaseAt > 220){
        wobbleCount++;
        lastTeaseAt = now;
        showTip(pickLine(reason));
      } else {
        // ë„ˆë¬´ ì—°íƒ€ë©´ ê³ ì • ë©˜íŠ¸
        showTip("ì§‘ ì‚¬ì£¼ì§€?");
      }
    }

    function unlockToAll(){
      locked = false;
      focus = null;
      options.classList.remove("houseOnly");
      setHovered(null);

      showTip(pickLine("restore"));
      setTimeout(()=>hideTip(), 260);
    }

    function enterHouse(){
      focus = "house";
      setHovered(optHouse);
      showTip(pickLine("house"));
    }

    function maybeAmbientInvite(){
      // ì„ íƒ í™”ë©´ì—ì„œ ë© ë•Œë¦¬ë©´ ê°€ë” ë†ë‹´ ë˜ì§€ê¸°
      if(locked) return;
      const now = performance.now();
      if(now - lastInviteAt < 1200) return;
      lastInviteAt = now;
      showTip(pickLine("invite"));
      setTimeout(()=>hideTip(), 900);
    }

    function finalizeHouse(){
      screenChoice.classList.remove("active");
      screenResult.classList.add("active");
      resultText.textContent = "ë‹¹ì‹ ì˜ ì„ íƒ: ğŸ  ì§‘ ì‚¬ì£¼ê¸°";

      // reset
      locked = false;
      focus = null;
      wobbleCount = 0;
      lastTeaseAt = 0;
      lastInviteAt = 0;
      options.classList.remove("houseOnly");
      setHovered(null);
      hideTip();
      setCopy("ì™„ë£Œ âœ… (ê·¼ë° ì‚¬ì‹¤ ì²˜ìŒë¶€í„° <b>ì§‘</b>ì´ì—ˆìŒ)");
    }

    // start / restart
    btnStart.addEventListener("click", ()=>{
      screenLanding.classList.remove("active");
      screenChoice.classList.add("active");

      // ëª¨ë°”ì¼ ì²« ì§„ì… ì‹œ íˆ´íŒ ì¢Œí‘œ ì–´ìƒ‰í•¨ ë°©ì§€
      if(isTouchDevice){
        px = innerWidth * 0.5;
        py = innerHeight * 0.58;
      }

      showTip(pickLine("invite"));
      setTimeout(()=>hideTip(), 900);
    });

    btnRestart.addEventListener("click", ()=>{
      screenResult.classList.remove("active");
      screenLanding.classList.add("active");

      locked = false;
      focus = null;
      wobbleCount = 0;
      lastTeaseAt = 0;
      lastInviteAt = 0;
      options.classList.remove("houseOnly");
      setHovered(null);
      hideTip();
      setCopy("ì˜¬ë ¤ë´ ğŸ™‚");
    });

    // pointer move (tooltip follow + ambient invite)
    window.addEventListener("pointermove", (e)=>{
      if(!screenChoice.classList.contains("active")) return;
      updatePointer(e);

      if(e.pointerType === "mouse"){
        // ë§ˆìš°ìŠ¤ê°€ í™”ë©´ ìœ„ì—ì„œ ë…¼ë‹¤ -> ê°€ë” ê°œê·¸ ë©˜íŠ¸
        if(!tipVisible && !locked && focus === null) maybeAmbientInvite();
      }
    });

    // Web: hover behavior (mouse only)
    optCash.addEventListener("pointerenter", (e)=>{
      if(e.pointerType !== "mouse") return;
      if(!screenChoice.classList.contains("active")) return;
      if(locked) return;
      focus = "cash";
      lockToHouse("cash");
    });

    optNone.addEventListener("pointerenter", (e)=>{
      if(e.pointerType !== "mouse") return;
      if(!screenChoice.classList.contains("active")) return;
      if(locked) return;
      focus = "none";
      lockToHouse("none");
    });

    optHouse.addEventListener("pointerenter", (e)=>{
      if(e.pointerType !== "mouse") return;
      if(!screenChoice.classList.contains("active")) return;
      enterHouse();
    });

    // Web: leave area -> restore
    options.addEventListener("pointerleave", (e)=>{
      if(e.pointerType !== "mouse") return;
      if(!screenChoice.classList.contains("active")) return;

      if(locked) unlockToAll();
      else {
        focus = null;
        setHovered(null);
        hideTip();
        setCopy("ì˜¬ë ¤ë´ ğŸ™‚");
      }
    });

    // Click rules (web):
    // - house click => finalize
    // - cash/none click => just trigger lock (never finalize)
    optHouse.addEventListener("click", ()=>{
      if(!screenChoice.classList.contains("active")) return;
      finalizeHouse();
    });
    optCash.addEventListener("click", ()=>{
      if(!screenChoice.classList.contains("active")) return;
      if(!locked) lockToHouse("cash");
    });
    optNone.addEventListener("click", ()=>{
      if(!screenChoice.classList.contains("active")) return;
      if(!locked) lockToHouse("none");
    });

    // Mobile: tap behavior
    function bindTap(el, type){
      el.addEventListener("touchstart", (e)=>{
        if(!screenChoice.classList.contains("active")) return;
        updatePointer(e);
        e.preventDefault();

        if(type === "house"){
          finalizeHouse();
          return;
        }
        // cash / none
        lockToHouse(type);
      }, {passive:false});

      el.addEventListener("touchmove", (e)=>{
        if(!screenChoice.classList.contains("active")) return;
        updatePointer(e);
      }, {passive:true});
    }

    if(isTouchDevice){
      bindTap(optHouse, "house");
      bindTap(optCash, "cash");
      bindTap(optNone, "none");

      // mobile: finger move -> show tease line sometimes
      window.addEventListener("touchmove", (e)=>{
        if(!screenChoice.classList.contains("active")) return;
        updatePointer(e);
        if(!tipVisible){
          showTip(locked ? "ì§‘ ì‚¬ì£¼ì§€?" : pickLine("invite"));
          setTimeout(()=>hideTip(), 700);
        }
      }, {passive:true});

      // mobile: tap outside options -> restore
      window.addEventListener("touchstart", (e)=>{
        if(!screenChoice.classList.contains("active")) return;
        const t = e.target;
        const inside = t.closest && t.closest("#options");
        if(!inside && locked) unlockToAll();
      }, {passive:true});
    }
  </script>
</body>
</html>
